(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(75)},28:function(e,t,a){},30:function(e,t,a){},51:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(10),s=a.n(i),c=(a(28),a(5)),r=a(6),m=a(8),l=a(7),h=a(9),u=a(1),d=(a(30),a(22)),g=a.n(d),b=(a(51),a(2)),f=a.n(b),p=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(l.a)(t).call(this,e))).state={fittingRoomNumber:"",showQR:!1,cart:[],scannedIds:[],showConfirmation:!1,emptyRooms:[]},a.showQR=a.showQR.bind(Object(u.a)(Object(u.a)(a))),a.handleError=a.handleError.bind(Object(u.a)(Object(u.a)(a))),a.offQR=a.offQR.bind(Object(u.a)(Object(u.a)(a))),a.appendToCart=a.appendToCart.bind(Object(u.a)(Object(u.a)(a))),a.clearCart=a.clearCart.bind(Object(u.a)(Object(u.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(Object(u.a)(a))),a.deleteItem=a.deleteItem.bind(Object(u.a)(Object(u.a)(a))),a.getEmptyRooms=a.getEmptyRooms.bind(Object(u.a)(Object(u.a)(a))),a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"offQR",value:function(){this.setState({showQR:!1})}},{key:"showQR",value:function(){this.setState({showQR:!0})}},{key:"handleError",value:function(e){console.error(e)}},{key:"appendToCart",value:function(e){var t=this;if(null!=e&&!this.state.scannedIds.includes(e)){new Audio("http://freesound.org/data/previews/144/144418_62484-lq.mp3").play();var a="http://207.46.230.56/apparel/"+e;f.a.get(a).then(function(a){return t.setState({scannedIds:t.state.scannedIds.concat(e),cart:t.state.cart.concat(a.data.color+" "+a.data.name+" ("+a.data.size+") ---- "),showConfirmation:!1})})}console.log(this.state.cart)}},{key:"clearCart",value:function(){this.setState({cart:[],scannedIds:[]})}},{key:"handleSubmit",value:function(){var e="http://207.46.230.56/fitting_room/"+s.a.findDOMNode(this.refs.dropdown).value+"/";this.state.scannedIds.forEach(function(t){return e=e.concat(t+"/")}),e=e.substring(0,e.length-1),console.log(e),f.a.post(e),this.clearCart(),this.setState({showConfirmation:!0})}},{key:"deleteItem",value:function(e){var t=this;this.setState({scannedIds:this.state.scannedIds.filter(function(a){return t.state.scannedIds.indexOf(a)!==t.state.cart.indexOf(e)}),cart:this.state.cart.filter(function(t){return t!==e})}),console.log(this.state.cart)}},{key:"getEmptyRooms",value:function(){var e=this;f.a.get("http://207.46.230.56/find_empty_room").then(function(t){e.setState({emptyRooms:t.data}),console.log(e.state.emptyRooms)})}},{key:"render",value:function(){var e=this,t=this.state.cart.map(function(t){return o.a.createElement("ol",{key:t}," ",t," ",o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.deleteItem(t)}},"Delete")))});return o.a.createElement("div",{className:"App"},o.a.createElement("h1",{className:"display-4"}," Changing Room Counter"),o.a.createElement("p",{className:"lead"},"Scan customer's items, then select fitting room"),o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{className:"btn btn-primary",onClick:this.showQR},"Scan QR Code of Item"),o.a.createElement("button",{className:"btn btn-primary",onClick:this.offQR},"Close Scanner"),o.a.createElement("button",{onClick:this.getEmptyRooms},"Get empty rooms"))),o.a.createElement("div",{ref:"QR"},this.state.showQR?o.a.createElement("div",{className:"jumbotron jumbotron-qr"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm"},o.a.createElement(g.a,{delay:200,onScan:this.appendToCart,style:{width:"20em"},onError:this.handleError,className:"QRcam"})),o.a.createElement("div",{className:"col-sm"},o.a.createElement("div",{className:"item-cart text-right"},o.a.createElement("h4",null,"Your cart"),o.a.createElement("hr",{className:"hr-black",align:"right"}),o.a.createElement("ol",{className:"item-list"},t)),o.a.createElement("div",{className:"float-right cart-btns"},o.a.createElement("button",{className:"btn btn-primary",onClick:this.clearCart},"Clear cart"),o.a.createElement("div",{className:"container select-room"},o.a.createElement("select",{className:"form-control dropdown-custom",ref:"dropdown",required:!0},o.a.createElement("option",{value:"",disabled:!0,selected:!0},"Select a fitting room"),o.a.createElement("option",{value:"1"},"1"),o.a.createElement("option",{value:"2"},"2"),o.a.createElement("option",{value:"3"},"3"),o.a.createElement("option",{value:"4"},"4"))),this.state.cart.length>0?o.a.createElement("button",{className:"btn btn-primary",onClick:this.handleSubmit},"Submit"):"")))):""),o.a.createElement("h4",{className:"submission-state",style:{marginTop:"1rem"}},this.state.showConfirmation?"Items successfully submitted!":"Pending new submission..."))}}]),t}(n.Component),v=(a(71),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(l.a)(t).call(this,e))).state={customerItems:[],requestedRecommendations:[],fittingRoomNumber:e.roomNumber,shownRecommendations:[],selectedItemForRecommendations:null,isOccupied:!1,highlightItem1:!1,highlightItem2:!1,highlightItem3:!1,highlightReco1:!1,highlightReco2:!1,highlightReco3:!1,requestedSize:""},a.getItems=a.getItems.bind(Object(u.a)(Object(u.a)(a))),a.getInstructions=a.getInstructions.bind(Object(u.a)(Object(u.a)(a))),a.getRecommendations=a.getRecommendations.bind(Object(u.a)(Object(u.a)(a))),a.requestItem=a.requestItem.bind(Object(u.a)(Object(u.a)(a))),a.leaveRoom=a.leaveRoom.bind(Object(u.a)(Object(u.a)(a))),a.requestedRecommendationsContains=a.requestedRecommendationsContains.bind(Object(u.a)(Object(u.a)(a))),a.shouldEmptyRoom=a.shouldEmptyRoom.bind(Object(u.a)(Object(u.a)(a))),a.getRecoFromSizeAndItemNumber=a.getRecoFromSizeAndItemNumber.bind(Object(u.a)(Object(u.a)(a))),a.convertShownRecosToUniqRecos=a.convertShownRecosToUniqRecos.bind(Object(u.a)(Object(u.a)(a))),a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"getItems",value:function(){var e=this,t="http://207.46.230.56/fitting_room/"+this.state.fittingRoomNumber;f.a.get(t).then(function(t){e.setState({customerItems:t.data})}).catch(function(e){return console.error("No items in room!")})}},{key:"getInstructions",value:function(){var e=this,t="http://207.46.230.56/action/"+this.state.fittingRoomNumber;f.a.get(t).then(function(t){if(""!==t.data)switch(console.log(t.data),t.data.action){case"item one":e.setState({highlightItem1:!0}),e.getRecommendations(e.state.customerItems[0]);break;case"item two":e.setState({highlightItem2:!0}),e.getRecommendations(e.state.customerItems[1]);break;case"item three":e.setState({highlightItem3:!0}),e.getRecommendations(e.state.customerItems[2]);break;case"first item":e.setState({highlightReco1:!0});break;case"second item":e.setState({highlightReco2:!0}),console.log(e.state.highlightReco2);break;case"third item":e.setState({highlightReco3:!0});break;case"size small":e.setState({requestedSize:"S"});break;case"size medium":e.setState({requestedSize:"M"});break;case"size large":e.setState({requestedSize:"L"});break;case"yes confirm":e.state.highlightReco1?e.requestItem(e.getRecoFromSizeAndItemNumber(e.state.requestedSize,"first item")):e.state.highlightReco2?e.requestItem(e.getRecoFromSizeAndItemNumber(e.state.requestedSize,"second item")):e.state.highlightReco2&&e.requestItem(e.getRecoFromSizeAndItemNumber(e.state.requestedSize,"third item"));break;default:console.log("Unavailable command")}})}},{key:"getRecommendations",value:function(e){var t=this;if(null!==e){var a="http://207.46.230.56/recommendations/"+e.id;f.a.get(a).then(function(a){t.setState({selectedItemForRecommendations:e,shownRecommendations:a.data}),console.log(a)})}}},{key:"getRecoFromSizeAndItemNumber",value:function(e,t){var a;switch(t){case"first item":a=0;break;case"second item":a=1;break;case"third item":a=2}for(var n=this.convertShownRecosToUniqRecos()[a].image,o=0;o<this.state.shownRecommendations.length;o++)if(this.state.shownRecommendations[o].image===n&&this.state.shownRecommendations[o].size===e)return this.state.shownRecommendations[o]}},{key:"convertShownRecosToUniqRecos",value:function(){var e=[];return this.state.shownRecommendations.forEach(function(t){var a=!1;e.forEach(function(e){e.image===t.image&&(a=!0)}),!0!==a&&e.push(t)}),e}},{key:"requestItem",value:function(e){var t="http://207.46.230.56/reco_request/"+this.state.fittingRoomNumber+"/"+e.id;this.setState({requestedRecommendations:this.state.requestedRecommendations.concat(e)}),f.a.post(t).then(function(e){return console.log(e)}),console.log(this.state.requestedRecommendations)}},{key:"leaveRoom",value:function(){this.setState({customerItems:[],requestedRecommendations:[],shownRecommendations:[],selectedItemForRecommendations:null,isOccupied:!1,highlightItem1:!1,highlightItem2:!1,highlightItem3:!1,highlightReco1:!1,highlightReco2:!1,highlightReco3:!1,requestedSize:""});var e="http://207.46.230.56/empty_room/"+this.state.fittingRoomNumber;f.a.post(e).then(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){setInterval(this.getItems,1e3),setInterval(this.getInstructions,500),setInterval(this.shouldEmptyRoom,1e3)}},{key:"requestedRecommendationsContains",value:function(e){for(var t=0;t<this.state.requestedRecommendations.length;t++)if(this.state.requestedRecommendations[t].id===e.id)return!0;return!1}},{key:"shouldEmptyRoom",value:function(){var e=this,t=new Headers;t.append("X-Api-Key","95A9DABA170B6FEFDEE15E5BD3905E19");var a=new FormData;return a.append("company_id",26),a.append("device_id",1),fetch("https://sense.singteliot.com/api/sensor_records/presence_count",{method:"POST",body:a,headers:t}).then(function(e){return e.json()}).then(function(t){var a=t.data[0].count;console.log("Count: "+a);var n=a>0,o=e.state.isOccupied;e.setState({isOccupied:n}),o&&!n&&e.leaveRoom()}).catch(function(e){return console.error("Error:",e)})}},{key:"render",value:function(){var e=this,t=this.state.customerItems.map(function(t){var a="https://hackathon2019sg.blob.core.windows.net/images/"+t.image+".jpg",n=e.state.customerItems.indexOf(t);return o.a.createElement("div",{key:t.id,className:"col-sm-3",style:{marginBottom:"1rem"}},o.a.createElement("div",{className:"card "+(0===n&&e.state.highlightItem1||1===n&&e.state.highlightItem2||2===n&&e.state.highlightItem3?"bgyellow":"")},o.a.createElement("img",{className:"card-image-top card-image",src:a,alt:"apparel"}),o.a.createElement("div",{className:"card-body",style:{textAlign:"center",alignItem:"center",justifyContent:"center"}},o.a.createElement("h5",{className:"card-title"},t.color+" "+t.name+" ("+t.size+") $"+t.price),o.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.getRecommendations(t)}},"See Recommendations"))))}),a=[],n=[],i=[];this.state.shownRecommendations.forEach(function(e){var t=!1;n.forEach(function(a){a.image===e.image&&(t=!0)}),!0!==t&&n.push(e)}),n.forEach(function(t){var a=[];e.state.shownRecommendations.forEach(function(e){e.image===t.image&&a.push(e.size)}),i.push(a+" ")});var s=-1,c=n.map(function(t){s++;var c="https://hackathon2019sg.blob.core.windows.net/images/"+t.image+".jpg",r=n.indexOf(t);return a.includes(t.image)?null:(a=a.concat(t.image),o.a.createElement("div",{key:t.id,className:"col-sm-3"},o.a.createElement("div",{className:"card "+(0===r&&e.state.highlightReco1||1===r&&e.state.highlightReco2||2===r&&e.state.highlightReco3?"bgyellow":"")},o.a.createElement("img",{className:"card-image-top card-image",src:c,alt:"apparel"}),o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title"},t.color+" "+t.name+" $"+t.price),o.a.createElement("h5",{className:"card-text"},"Available Sizes: "),o.a.createElement("p",{style:{color:"black",fontSize:"1.5vw"}},i[s]),e.requestedRecommendationsContains(t)?o.a.createElement("p",{className:"card-text",style:{color:"black"}},"Item is on its way!"):o.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.requestItem(t)}},"Request item")))))});return o.a.createElement("div",{className:"container"},o.a.createElement("h1",{style:{marginBottom:"1rem"}},"Fitting Room "+this.state.fittingRoomNumber),o.a.createElement("hr",null),o.a.createElement("div",{className:"container row"},t),o.a.createElement("h1",{style:{marginBottom:"1rem"}},null!==this.state.selectedItemForRecommendations?"Showing recommendations for: "+this.state.selectedItemForRecommendations.color+" "+this.state.selectedItemForRecommendations.name+" ("+this.state.selectedItemForRecommendations.size+")":"Select an item to view recommendations"),o.a.createElement("hr",null),o.a.createElement("div",{className:"container row"},c))}}]),t}(n.Component)),R=(a(73),a(12)),E=a.n(R),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(l.a)(t).call(this,e))).state={pendingRequests:[],inTransit:[]},a.getPendingRequests=a.getPendingRequests.bind(Object(u.a)(Object(u.a)(a))),a.shiftFromPendingToTransit=a.shiftFromPendingToTransit.bind(Object(u.a)(Object(u.a)(a))),a.markAsDelivered=a.markAsDelivered.bind(Object(u.a)(Object(u.a)(a))),a.getInTransit=a.getInTransit.bind(Object(u.a)(Object(u.a)(a))),a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"getPendingRequests",value:function(){var e=this;f.a.get("http://207.46.230.56/phone_update").then(function(t){return e.setState({pendingRequests:t.data})}).then(function(){return console.log("pendingRequests"+e.state.pendingRequests)})}},{key:"shiftFromPendingToTransit",value:function(e){var t="http://207.46.230.56/accept_request/"+e.fittingRoomNumber+"/"+e.item.id;f.a.post(t).then(function(e){return console.log(e)})}},{key:"getInTransit",value:function(){var e=this;f.a.get("http://207.46.230.56/check_transit_items").then(function(t){e.setState({inTransit:t.data})}).then(function(){return console.log("in transit"+e.state.inTransit)})}},{key:"markAsDelivered",value:function(e){var t="http://207.46.230.56/delivered/"+e.fittingRoomNumber+"/"+e.item.id;f.a.post(t).then(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){setInterval(this.getPendingRequests,1e3),setInterval(this.getInTransit,1e3)}},{key:"render",value:function(){var e=this,t=this.state.pendingRequests.map(function(t){var a="https://hackathon2019sg.blob.core.windows.net/images/"+t.item.image+".jpg";return o.a.createElement("div",{key:E()(),className:"col-sm-3"},o.a.createElement("div",{className:"card"},o.a.createElement("img",{className:"card-image-top card-image",src:a,alt:"apparel"}),o.a.createElement("div",{className:"card-body"},o.a.createElement("h4",{className:"card-title"},t.item.color+" "+t.item.name+" "+t.item.size+" for fitting room "+t.fittingRoomNumber+". Location: "+t.item.location_in_store),o.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.shiftFromPendingToTransit(t)}},"Fetch for customer"))))}),a=this.state.inTransit.map(function(t){var a="https://hackathon2019sg.blob.core.windows.net/images/"+t.item.image+".jpg";return o.a.createElement("div",{key:E()(),className:"col-sm-3"},o.a.createElement("div",{className:"card"},o.a.createElement("img",{className:"card-image-top card-image",src:a,alt:"apparel"}),o.a.createElement("div",{className:"card-body"},o.a.createElement("h4",{className:"card-title"},t.item.color+" "+t.item.name+" "+t.item.size+" for fitting room "+t.fittingRoomNumber+". Location: "+t.item.location_in_store),o.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.markAsDelivered(t)}},"Delivered"))))});return o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"List of Current Requests:"),o.a.createElement("hr",null),o.a.createElement("div",{className:"container row"},t),o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"List of Items In Transit:"),o.a.createElement("hr",null),o.a.createElement("div",{className:"container row"},a)))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(l.a)(t).call(this,e))).state={showCounter:!1,showFittingRoomSelection:!1,showFittingRoom:!1,showPhone:!1,fittingRoomSelection:""},a.showCounter=a.showCounter.bind(Object(u.a)(Object(u.a)(a))),a.showFittingRoom=a.showFittingRoom.bind(Object(u.a)(Object(u.a)(a))),a.showPhone=a.showPhone.bind(Object(u.a)(Object(u.a)(a))),a.showFittingRoomSelection=a.showFittingRoomSelection.bind(Object(u.a)(Object(u.a)(a))),a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"showCounter",value:function(){this.setState({showCounter:!0})}},{key:"showFittingRoomSelection",value:function(){this.setState({showFittingRoomSelection:!0})}},{key:"showPhone",value:function(){this.setState({showPhone:!0})}},{key:"showFittingRoom",value:function(){this.setState({showFittingRoom:!0,fittingRoomSelection:s.a.findDOMNode(this.refs.dropdown).value}),console.log(this.state.fittingRoomSelection)}},{key:"render",value:function(){return o.a.createElement("div",{className:"jumbotron jumbotron-fluid"},o.a.createElement("div",{className:"container text-center"},this.state.showCounter||this.state.showFittingRoom||this.state.showPhone||this.state.showFittingRoomSelection?o.a.createElement("div",null):o.a.createElement("div",null,o.a.createElement("h1",{className:"display-4"}," Greetings, human! "),o.a.createElement("p",{className:"lead"},"Welcome to ",o.a.createElement("strong",null,"FlashFit"),", the retail solution that changes your life."),o.a.createElement("hr",null),o.a.createElement("p",null,"Begin by selecting your screen below."),o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{className:"btn btn-primary",onClick:this.showCounter},"Counter"),o.a.createElement("button",{className:"btn btn-primary",onClick:this.showFittingRoomSelection},"Fitting Room"),o.a.createElement("button",{className:"btn btn-primary",onClick:this.showPhone},"Phone"))),this.state.showCounter&&o.a.createElement(p,null),this.state.showFittingRoom?o.a.createElement(v,{roomNumber:this.state.fittingRoomSelection}):this.state.showFittingRoomSelection?o.a.createElement("div",null,o.a.createElement("select",{className:"form-control",ref:"dropdown"},o.a.createElement("option",{value:"",disabled:!0,selected:!0},"Select fitting room number"),o.a.createElement("option",{value:"1"},"1"),o.a.createElement("option",{value:"2"},"2"),o.a.createElement("option",{value:"3"},"3"),o.a.createElement("option",{value:"4"},"4")),o.a.createElement("button",{className:"btn btn-primary",onClick:this.showFittingRoom},"Submit")):o.a.createElement("div",null),this.state.showPhone&&o.a.createElement(w,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,2,1]]]);
//# sourceMappingURL=main.484a1f8d.chunk.js.map